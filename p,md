
## ğŸ“ Product Requirements Document (PRD)

---

### ğŸ“Œ Product Name
**Visual Web Comic Dubber**

---

### ğŸ§  Overview
A Chrome extension that detects speech bubbles in web comics using OCR (Google Gemini 2.0 Flash API), reads them aloud using the Web Speech API (Text-to-Speech), and allows users to customize voice, speed, and pitch. Users can enjoy web comics in an audio-visual format, with automatic character voice assignments and seamless playback.

---

### ğŸ¯ Goals
- Detect speech bubbles in web comics.
- Extract text via OCR using **Google Gemini 2.0 Flash API**.
- Read out the extracted text using the **Web Speech API (TTS)**.
- Allow character-specific voice configuration.
- Provide UI controls for:
  - Play, Pause, Stop
  - Voice selection
  - Speed and Pitch adjustment

---

### ğŸ—‚ï¸ Project Structure
```
project-root/
â”‚
â”œâ”€â”€ extension/         # Chrome Extension Frontend
â”‚   â”œâ”€â”€ manifest.json
â”‚   â”œâ”€â”€ content.js
â”‚   â”œâ”€â”€ background.js
â”‚   â”œâ”€â”€ popup.html / popup.js (optional)
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â””â”€â”€ settings.html / settings.js
â”‚   â””â”€â”€ assets/
â”‚       â””â”€â”€ icons, styles
â”‚
â””â”€â”€ backend/           # Node.js Backend for OCR
    â”œâ”€â”€ server.js
    â”œâ”€â”€ routes/ocr.js
    â”œâ”€â”€ services/geminiOCR.js
    â””â”€â”€ .env
```

---

### âš™ï¸ Core Features

#### 1. ğŸ–¼ï¸ Speech Bubble Detection
- **Client-side:** Detect comic panels and speech bubbles using DOM analysis and image processing.
- **Backend:** Send image regions or whole screenshots to the backend for OCR.

#### 2. ğŸ“„ OCR Text Extraction (Backend)
- Uses **Google Gemini 2.0 Flash API** to extract text from comic panels.
- Processes and returns structured dialogue content.

#### 3. ğŸ”Š TTS Playback (Frontend)
- Uses **Web Speech API** (`SpeechSynthesisUtterance`)
- Customizable voice for each character (based on bubble position or user tag).
- Adjustable playback:
  - **Speed**
  - **Pitch**
  - **Voice**

#### 4. ğŸ§‘â€ğŸ¨ Character Voice Assignment
- Based on bubble position (left/right/top) or user rules.
- UI to assign different voices to characters (saved in localStorage or synced storage).

#### 5. ğŸ§© Inline Controls
- Floating UI overlay with:
  - Play/Pause/Stop
  - Voice selector
  - Speed/pitch sliders
  - Toggle auto-play

---

### ğŸ“¶ APIs Used

#### Backend
- **Google Gemini 2.0 Flash API**
  - Endpoint: `/api/ocr`
  - Input: Screenshot or cropped image region (base64)
  - Output: Detected text in order

#### Frontend
- **Web Speech API** (`SpeechSynthesis`)
  - For reading out the extracted dialogues

---

### ğŸ” Permissions (Chrome Extension)
```json
"permissions": [
  "activeTab",
  "scripting",
  "storage"
],
"host_permissions": [
  "<all_urls>"
]
```

---

### ğŸ“± UI Mockups (High-Level)
1. **Floating Toolbar**
   - Play / Pause / Stop
   - Gear icon for settings
2. **Settings Panel**
   - Voice dropdown per character
   - Speed/Pitch sliders
   - Enable/Disable auto-play

---

### ğŸ§ª MVP Checklist
- [ ] Speech bubble detection via DOM or image cropping
- [ ] OCR integration with backend (Gemini 2.0 Flash)
- [ ] Basic TTS playback of detected dialogue
- [ ] Voice customization per character
- [ ] UI for playback + settings

---

### ğŸš€ other Enhancements
- Emotion-based voice tone
- Speech synchronization with highlighted bubbles
- Comic navigation and playback history
- Cloud sync of voice settings using chrome.storage.sync API

---
