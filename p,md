Perfect! That simplifies things. Let's update the **Product Requirements Document (PRD)** accordingly â€” now the extension **detects all text directly from comic images** without needing to identify speech bubbles specifically.

---

## ğŸ“ Updated Product Requirements Document (PRD)

---

### ğŸ“Œ Product Name
**Visual Web Comic Dubber**

---

### ğŸ§  Overview
A Chrome extension that detects and reads text from web comics aloud. It uses **Google Gemini 2.0 Flash API** for OCR (detecting text directly from the comic image) and the **Web Speech API** for Text-to-Speech (TTS). Users can customize the reading voice, pitch, and speed.

---

### ğŸ¯ Goals
- Detect all visible text in comic images using OCR.
- Read extracted text using TTS via Web Speech API.
- Allow full control over:
  - Voice selection
  - Speed
  - Pitch
  - Playback (Play, Pause, Stop)

---

### ğŸ—‚ï¸ Project Structure
```
project-root/
â”‚
â”œâ”€â”€ extension/         # Chrome Extension Frontend
â”‚   â”œâ”€â”€ manifest.json
â”‚   â”œâ”€â”€ content.js            # Injected script for capturing comic images
â”‚   â”œâ”€â”€ background.js
â”‚   â”œâ”€â”€ ui/
â”‚   â”‚   â””â”€â”€ toolbar.html / toolbar.js / toolbar.css
â”‚   â”œâ”€â”€ settings/             # Settings UI
â”‚   â”‚   â””â”€â”€ settings.html / settings.js
â”‚   â””â”€â”€ assets/
â”‚       â””â”€â”€ icons, styles
â”‚
â””â”€â”€ backend/           # Node.js Backend for OCR
    â”œâ”€â”€ server.js
    â”œâ”€â”€ routes/ocr.js
    â”œâ”€â”€ services/geminiOCR.js
    â””â”€â”€ .env
```

---

### âš™ï¸ Core Features

#### 1. ğŸ“· Image Capture (Frontend)
- Select comic image via right-click, drag, or hover.
- Extract the image or its base64 representation.
- Send to backend for OCR.

#### 2. ğŸ“„ OCR Text Extraction (Backend)
- POST image to `/api/ocr`
- Use **Google Gemini 2.0 Flash API** to extract **all visible text** from the image.
- Return cleaned and ordered text for narration.

#### 3. ğŸ”Š TTS Playback (Frontend)
- Use **Web Speech API**
- Convert returned text to speech
- Playback controls:
  - **Play / Pause / Stop**
  - **Speed & Pitch sliders**
  - **Voice selection**

#### 4. âš™ï¸ Settings UI
- Choose from available voices
- Adjust reading speed and pitch
- Toggle auto-play on OCR return
- All settings saved to Chrome `storage.sync`

---

### ğŸ“¶ APIs Used

#### Backend
- **Google Gemini 2.0 Flash API**
  - Input: Base64 comic image
  - Output: Ordered extracted text
  - Integrated via `geminiOCR.js` service

#### Frontend
- **Web Speech API**
  - For speech synthesis from OCR text

---

### ğŸ” Chrome Extension Permissions
```json
"permissions": [
  "activeTab",
  "scripting",
  "storage",
  "contextMenus"
],
"host_permissions": [
  "<all_urls>"
]
```

---

### ğŸ“± UI Overview

#### ğŸ§­ Floating Toolbar
- Play / Pause / Stop
- "Capture Comic" button
- Settings gear icon

#### ğŸšï¸ Settings Panel
- Voice selector (dropdown)
- Speed and Pitch sliders
- Auto-play toggle

---

### âœ… MVP Checklist
- [ ] Capture comic image from webpage
- [ ] Send image to backend for OCR
- [ ] Get and read extracted text via Web Speech API
- [ ] Allow voice customization and settings storage
- [ ] Simple UI for playback and settings

---

### ğŸš€ Future Add-ons
- Character-specific voice assignment
- Highlight words during TTS
- Comic page auto-scroll sync with voice
