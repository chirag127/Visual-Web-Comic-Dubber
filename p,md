Perfect! That simplifies things. Let's update the **Product Requirements Document (PRD)** accordingly — now the extension **detects all text directly from comic images** without needing to identify speech bubbles specifically.

---

## 📝 Updated Product Requirements Document (PRD)

---

### 📌 Product Name
**Visual Web Comic Dubber**

---

### 🧠 Overview
A Chrome extension that detects and reads text from web comics aloud. It uses **Google Gemini 2.0 Flash API** for OCR (detecting text directly from the comic image) and the **Web Speech API** for Text-to-Speech (TTS). Users can customize the reading voice, pitch, and speed.

---

### 🎯 Goals
- Detect all visible text in comic images using OCR.
- Read extracted text using TTS via Web Speech API.
- Allow full control over:
  - Voice selection
  - Speed
  - Pitch
  - Playback (Play, Pause, Stop)

---

### 🗂️ Project Structure
```
project-root/
│
├── extension/         # Chrome Extension Frontend
│   ├── manifest.json
│   ├── content.js            # Injected script for capturing comic images
│   ├── background.js
│   ├── ui/
│   │   └── toolbar.html / toolbar.js / toolbar.css
│   ├── settings/             # Settings UI
│   │   └── settings.html / settings.js
│   └── assets/
│       └── icons, styles
│
└── backend/           # Node.js Backend for OCR
    ├── server.js
    ├── routes/ocr.js
    ├── services/geminiOCR.js
    └── .env
```

---

### ⚙️ Core Features

#### 1. 📷 Image Capture (Frontend)
- Select comic image via right-click, drag, or hover.
- Extract the image or its base64 representation.
- Send to backend for OCR.

#### 2. 📄 OCR Text Extraction (Backend)
- POST image to `/api/ocr`
- Use **Google Gemini 2.0 Flash API** to extract **all visible text** from the image.
- Return cleaned and ordered text for narration.

#### 3. 🔊 TTS Playback (Frontend)
- Use **Web Speech API**
- Convert returned text to speech
- Playback controls:
  - **Play / Pause / Stop**
  - **Speed & Pitch sliders**
  - **Voice selection**

#### 4. ⚙️ Settings UI
- Choose from available voices
- Adjust reading speed and pitch
- Toggle auto-play on OCR return
- All settings saved to Chrome `storage.sync`

---

### 📶 APIs Used

#### Backend
- **Google Gemini 2.0 Flash API**
  - Input: Base64 comic image
  - Output: Ordered extracted text
  - Integrated via `geminiOCR.js` service

#### Frontend
- **Web Speech API**
  - For speech synthesis from OCR text

---

### 🔐 Chrome Extension Permissions
```json
"permissions": [
  "activeTab",
  "scripting",
  "storage",
  "contextMenus"
],
"host_permissions": [
  "<all_urls>"
]
```

---

### 📱 UI Overview

#### 🧭 Floating Toolbar
- Play / Pause / Stop
- "Capture Comic" button
- Settings gear icon

#### 🎚️ Settings Panel
- Voice selector (dropdown)
- Speed and Pitch sliders
- Auto-play toggle

---

### ✅ MVP Checklist
- [ ] Capture comic image from webpage
- [ ] Send image to backend for OCR
- [ ] Get and read extracted text via Web Speech API
- [ ] Allow voice customization and settings storage
- [ ] Simple UI for playback and settings

---

### 🚀 Future Add-ons
- Character-specific voice assignment
- Highlight words during TTS
- Comic page auto-scroll sync with voice
